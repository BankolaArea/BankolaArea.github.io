<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ржЖржкржирж╛рж░ ржнржмрж┐рж╖рзНржпрзО рж╕рзБрж░ржХрзНрж╖рж┐ржд ржХрж░рзБржи: ржЬржорж┐ ржЕржзрж┐ржЧрзНрж░рж╣ржгрзЗрж░ ржпрж╛рждрзНрж░рж╛</title>
    <style>
        :root {
            --primary: #4f46e5;
            --success: #22c55e;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1e293b;
            --light: #f8fafc;
            --white: #ffffff;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Kalpurush', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #0f172a;
            color: var(--dark);
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
        }

        #app {
            width: 100%;
            max-width: 500px;
            background: var(--light);
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        header {
            background: var(--primary);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 10;
            font-size: 0.9rem;
        }

        .screen {
            flex: 1;
            display: none;
            /* flexible display toggled via JS */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
            overflow-y: auto;
            position: relative;
        }

        .screen.active {
            display: flex;
            animation: fadeIn 0.4s ease-out;
        }

        /* Elements */
        .emoji-icon {
            font-size: 5rem;
            margin: 20px;
            display: inline-block;
        }

        h1 {
            font-size: 1.8rem;
            color: var(--primary);
            margin: 0.5rem 0;
        }

        h2 {
            font-size: 1.4rem;
            color: var(--dark);
            margin: 0.5rem 0;
        }

        p {
            font-size: 1.1rem;
            color: #475569;
            line-height: 1.5;
            margin: 10px 0 20px 0;
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 18px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            width: 90%;
            margin: 10px 0;
            box-shadow: 0 4px 0 #3730a3;
            /* pressed effect style */
            transition: transform 0.1s;
        }

        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #3730a3;
        }

        .btn-green {
            background: var(--success);
            box-shadow: 0 4px 0 #15803d;
        }

        .btn-green:active {
            box-shadow: 0 0 0 #15803d;
        }

        .btn-red {
            background: var(--danger);
            box-shadow: 0 4px 0 #b91c1c;
        }

        .btn-red:active {
            box-shadow: 0 0 0 #b91c1c;
        }

        /* Level 1: Map */
        .map-container {
            width: 250px;
            height: 250px;
            background: #cbd5e1;
            border: 4px solid #334155;
            border-radius: 10px;
            position: relative;
            margin: 20px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .map-blur {
            filter: blur(8px);
            transition: filter 1s;
        }

        .map-sharp {
            filter: blur(0);
        }

        .map-obj {
            font-size: 2rem;
            position: absolute;
            transition: opacity 0.5s;
            opacity: 0;
        }

        .padlock {
            font-size: 1.5rem;
            position: absolute;
            top: -10px;
            right: -10px;
            opacity: 0;
            transition: opacity 0.5s 1s;
        }

        /* delayed */

        /* Level 2: Docs */
        .doc-area {
            display: flex;
            gap: 15px;
            margin: 20px 0;
        }

        .doc-card {
            border: 2px solid #94a3b8;
            padding: 15px;
            border-radius: 8px;
            background: white;
            width: 140px;
            position: relative;
        }

        .doc-card.correct {
            border-color: var(--success);
            background: #dcfce7;
        }

        .doc-card.wrong {
            border-color: var(--danger);
            background: #fee2e2;
        }

        /* Level 3: Calendar */
        .calendar-box {
            font-size: 4rem;
            border: 3px solid var(--dark);
            border-radius: 15px;
            padding: 20px;
            margin: 20px;
            background: white;
            position: relative;
        }

        .shield-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-size: 5rem;
            opacity: 0.8;
            transition: transform 0.5s;
        }

        /* Modal */
        #modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            animation: popUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .lesson-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        /* Animations */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            20%,
            60% {
                transform: translateX(-10px);
            }

            40%,
            80% {
                transform: translateX(10px);
            }
        }

        .shake-anim {
            animation: shake 0.5s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes popUp {
            from {
                transform: scale(0.5);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>

<body>

    <div id="app">
        <header>рж╢рзБрж░рзБ -> рж╕ржорзАржХрзНрж╖рж╛ -> ржорж┐ржЙржЯрзЗрж╢ржи -> ржмрж┐ржЬрзНржЮржкрзНрждрж┐ -> ржпрж╛ржЪрж╛ржЗ -> ржЪрж╛ржХрж░рж┐</header>

        <!-- INTRO -->
        <div id="screen-intro" class="screen active">
            <h1>ржжрзЗрж░рж┐ ржХрзЗржи?</h1>
            <div class="emoji-icon">ЁЯСитАНЁЯМ╛ЁЯПб</div>
            <h2>ржЖржкржирж╛рж░ ржнржмрж┐рж╖рзНржпрзО рж╕рзБрж░ржХрзНрж╖рж┐ржд ржХрж░рзБржи</h2>
            <p>ржХржерж╛ржпрж╝ ржЖржЫрзЗ "рж╕ржоржпрж╝ржЗ ржЯрж╛ржХрж╛"ред ржХрж┐ржирзНрждрзБ ржПржЦрж╛ржирзЗ "рж╕ржоржпрж╝ржЗ рж╕рзБрж░ржХрзНрж╖рж╛"ред<br>ржЬрж╛ржирзБржи ржХрзАржнрж╛ржмрзЗ ржжрзЗрж░рж┐ ржЖржкржирж╛ржХрзЗ рж░ржХрзНрж╖рж╛ ржХрж░рзЗред</p>
            <button class="btn btn-green" onclick="game.start()">ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ рж╢рзБрж░рзБ ржХрж░рзБржи</button>
        </div>

        <!-- LEVEL 1: DRONE -->
        <div id="screen-l1" class="screen">
            <h2>ржзрж╛ржк рзз: ржЖржХрж╛рж╢рзЗрж░ ржиржЬрж░</h2>
            <p>ржЖржкржирж╛рж░ рж╕ржорзНржкрждрзНрждрж┐рж░ рж░рзЗржХрж░рзНржб ржХрж┐ рж╕ржарж┐ржХ?</p>

            <div class="map-container" id="l1-map">
                <div style="font-size:5rem; opacity:0.3; filter:blur(5px);" id="l1-blur-layer">ЁЯЧ║я╕П</div>
                <!-- Hidden objects -->
                <div class="map-obj" style="top:40px; left:40px;">ЁЯПа<span class="padlock">ЁЯФТ</span></div>
                <div class="map-obj" style="bottom:40px; right:40px;">ЁЯМ│<span class="padlock">ЁЯФТ</span></div>
                <div class="map-obj" style="top:40px; right:50px;">ЁЯЫЦ<span class="padlock">ЁЯФТ</span></div>
            </div>

            <button class="btn" onclick="level1.launchDrone()">ЁЯЪА ржбрзНрж░рзЛржи ржЪрж╛рж▓рзБ ржХрж░рзБржи (рззрзл ржжрж┐ржи)</button>
        </div>

        <!-- LEVEL 2: MUTATION -->
        <div id="screen-l2" class="screen">
            <h2>ржзрж╛ржк рзи: ржорж┐рж╢ржи рж╕ржЮрзНржЬрзАржмржирзА</h2>
            <p>ржЖржорж░рж╛ рж╕рж░ржХрж╛рж░рж┐ рж░рзЗржХрж░рзНржб (RoR) ржЕржирзБржпрж╛ржпрж╝рзА ржЯрж╛ржХрж╛ ржжрзЗржЗред</p>

            <div class="doc-area">
                <div class="doc-card">
                    <strong>ржЖржкржирж╛рж░ ржжрж▓рж┐рж▓</strong><br>
                    <div style="font-size:2rem;">ЁЯУЬ</div>
                    <span style="color:blue; font-weight:bold;">рзл ржПржХрж░</span>
                </div>
                <div class="doc-card" id="l2-ror">
                    <strong>RoR рж░рзЗржХрж░рзНржб</strong><br>
                    <div style="font-size:2rem;">ЁЯПЫя╕П</div>
                    <span id="l2-ror-text" style="color:red; font-weight:bold;">рзй ржПржХрж░</span>
                </div>
            </div>

            <button class="btn btn-warning" onclick="level2.tryClaim()">ЁЯТ░ ржПржЦржиржЗ ржЯрж╛ржХрж╛ ржжрж╛ржмрж┐ ржХрж░рзБржи</button>
            <button class="btn btn-green" onclick="level2.mutate()">ЁЯЦКя╕П рж░рзЗржХрж░рзНржб ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ ржЖржмрзЗржжржи ржХрж░рзБржи (рж░рзЗржХрж░рзНржб ржарж┐ржХ
                ржХрж░рзБржи)</button>
        </div>

        <!-- LEVEL 3: PUBLIC SHIELD -->
        <div id="screen-l3" class="screen">
            <h2>ржзрж╛ржк рзй: ржкрж╛ржмрж▓рж┐ржХ рж╢рж┐рж▓рзНржб</h2>
            <p>ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ ржирзЛржЯрж┐рж╢ рзирзз ржжрж┐ржи рж╕ржоржпрж╝ ржирзЗржпрж╝ред ржПржЯрж┐ ржзрзАрж░ ржоржирзЗ рж╣ржпрж╝ред</p>

            <div class="calendar-box">
                ЁЯУЕ
                <div id="l3-shield" class="shield-overlay">ЁЯЫбя╕П</div>
            </div>
            <div id="l3-anim-area" style="font-size:2rem; height:50px;"></div>

            <button class="btn btn-red" onclick="level3.fastForward()">тПй ржжрзНрж░рзБржд ржПржЧрж┐ржпрж╝рзЗ ржпрж╛ржи (ржмрж╛ржж ржжрж┐ржи)</button>
            <button class="btn btn-green" onclick="level3.wait()">тП│ рзирзз ржжрж┐ржи ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи (ржирж┐рж░рж╛ржкржж ржерж╛ржХрзБржи)</button>
        </div>

        <!-- LEVEL 4: TWIN SON -->
        <div id="screen-l4" class="screen">
            <h2>ржзрж╛ржк рзк: ржпржоржЬ ржкрзНрж░рждрж┐рж░ржХрзНрж╖рж╛</h2>
            <p>ржХрзЗржЙ ржЖржкржирж╛рж░ ржЪрж╛ржХрж░рж┐ ржЪрж╛ржпрж╝ред рж╕рзЗ ржХрзЗ?</p>

            <div style="display:flex; justify-content:center; gap:20px; margin-bottom:20px;">
                <div style="font-size:4rem;">ЁЯСд</div>
                <div style="font-size:4rem; filter:grayscale(100%); opacity:0.5;">ЁЯСд</div>
            </div>
            <p>ржкрж░рж┐ржЪржпрж╝ ржкрзБржирж░рж╛ржпрж╝ ржпрж╛ржЪрж╛ржЗ ржХрж░ржмрзЗржи?</p>

            <button class="btn btn-red" onclick="level4.skip()">ржкрзБрж▓рж┐рж╢ ржнрзЗрж░рж┐ржлрж┐ржХрзЗрж╢ржи ржмрж╛ржж ржжрж┐ржи</button>
            <button class="btn btn-green" onclick="level4.verify()">ржкрж░рж┐ржЪржпрж╝ ржпрж╛ржЪрж╛ржЗ ржХрж░рзБржи (рзз ржорж╛рж╕)</button>
        </div>

        <!-- CONCLUSION -->
        <div id="screen-end" class="screen">
            <div class="emoji-icon">ЁЯОЙЁЯТ╝ЁЯТ░</div>
            <h1>ржЕржнрж┐ржиржирзНржжржи!</h1>
            <p>SOP ржЕржирзБрж╕рж░ржг ржХрж░рзЗ, ржЖржкржирж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗржЫрзЗржи:</p>
            <ul style="text-align:left; color:#334155; margin-bottom:30px;">
                <li>тЬЕ рж╕ржорзНржкржж рж▓ржХ ржПржмржВ рж╕рзБрж░ржХрзНрж╖рж┐ржд</li>
                <li>тЬЕ ржорж┐ржЙржЯрзЗрж╢ржирзЗрж░ ржорж╛ржзрзНржпржорзЗ рж╕ржорзНржкрзВрж░рзНржг ржЕрж░рзНржержкрзНрж░ржжрж╛ржи</li>
                <li>тЬЕ ржмрж┐ржЬрзНржЮржкрзНрждрж┐рж░ ржорж╛ржзрзНржпржорзЗ ржЖржЗржирж┐ рж╕рзБрж░ржХрзНрж╖рж╛</li>
                <li>тЬЕ ржкрзНрж░рждрж╛рж░ржХржжрзЗрж░ ржерзЗржХрзЗ ржЪрж╛ржХрж░рж┐ рж╕рзБрж░ржХрзНрж╖рж┐ржд</li>
            </ul>
            <button class="btn" onclick="location.reload()">ЁЯФД ржЖржмрж╛рж░ ржЦрзЗрж▓рзБржи</button>
        </div>

    </div>

    <!-- MODAL -->
    <div id="modal-overlay">
        <div class="modal-content">
            <div class="lesson-icon" id="modal-icon">ЁЯТб</div>
            <h2 id="modal-title">рж╢рж┐ржХрзНрж╖ржгрзАржпрж╝ ржорзБрж╣рзВрж░рзНржд</h2>
            <p id="modal-text">ржмрж┐рж╖ржпрж╝ржмрж╕рзНрждрзБ ржПржЦрж╛ржирзЗ ржпрж╛ржмрзЗ...</p>
            <button class="btn" onclick="modal.close()">ржмрзБржЭрзЗржЫрж┐!</button>
        </div>
    </div>

    <script>
        // --- AUDIO SYSTEM ---
        const speak = (text) => {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'bn-IN'; // Bengali India
            utterance.rate = 1.0;

            // Attempt to set specific voice
            const voices = window.speechSynthesis.getVoices();
            const bnVoice = voices.find(v => v.lang.includes('bn'));
            if (bnVoice) utterance.voice = bnVoice;

            window.speechSynthesis.speak(utterance);
        };

        // --- GAME STATE ---
        const game = {
            screen: 'intro',
            start: () => switchScreen('screen-l1'),
            next: (currentId, nextId) => switchScreen(nextId)
        };

        function switchScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // --- MODAL SYSTEM ---
        const modal = {
            show: (title, text, icon, callback) => {
                document.getElementById('modal-title').innerText = title;
                document.getElementById('modal-text').innerText = text;
                if (icon) document.getElementById('modal-icon').innerText = icon;

                document.getElementById('modal-overlay').style.display = 'flex';
                speak(text); // AUTO AUDIO

                modal.callback = callback;
            },
            close: () => {
                window.speechSynthesis.cancel();
                document.getElementById('modal-overlay').style.display = 'none';
                if (modal.callback) modal.callback();
            }
        };

        // --- LEVEL 1: DRONE ---
        const level1 = {
            launchDrone: () => {
                const map = document.getElementById('l1-map');
                const blur = document.getElementById('l1-blur-layer');
                const objs = document.querySelectorAll('.map-obj');
                const locks = document.querySelectorAll('.padlock');

                // Anim
                blur.style.opacity = '0';
                map.style.background = '#86efac'; // clearer green
                objs.forEach(o => o.style.opacity = '1');

                setTimeout(() => {
                    locks.forEach(l => l.style.opacity = '1');
                    setTimeout(() => {
                        modal.show(
                            "ржбрж┐ржЯрзЗрж▓рж╕ рж▓ржХ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ!",
                            "ржЖржорж░рж╛ рззрзл ржжрж┐ржирзЗрж░ ржоржзрзНржпрзЗ ржбрзНрж░рзЛржи ржЕржержмрж╛ рж╕рзНржпрж╛ржЯрзЗрж▓рж╛ржЗржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЫржмрж┐ рждрзБрж▓рзЗ рж░рж╛ржЦрж┐ред ржХрзЗржи? ржЖржкржирж╛рж░ рж╕ржорзНржкржжрзЗрж░ ржбрж┐ржЯрзЗрж▓рж╕ рж╕рзНржерж┐рж░ ржХрж░рждрзЗред ржпрж╛рждрзЗ ржХрзЛржирзЛ ржмрж╣рж┐рж░рж╛ржЧржд рж░рж╛рждрж╛рж░рж╛рждрж┐ ржиржХрж▓ ржХрзБржБржбрж╝рзЗржШрж░ ржмрж╛ржирж┐ржпрж╝рзЗ ржЖржкржирж╛рж░ рж╕ржорзНржкрждрзНрждрж┐рж░ ржкрзБрж░рзЛржирзЛ ржжржЦрж▓ржжрж╛рж░ рж╣рж┐рж╕рж╛ржмрзЗ ржЖржкржирж╛рж░ ржХрзНрж╖рждрж┐ржкрзВрж░ржг ржерзЗржХрзЗ ржирж┐ржЬрзЗрж░ ржЕржВрж╢ ржжрж╛ржмрж┐ ржирж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржЖржкржирж╛рж░ рж╕ржорзНржкржж рж▓ржХ ржПржмржВ ржирж┐рж░рж╛ржкржжред",
                            "ЁЯЫ░я╕ПЁЯФТ",
                            () => game.next('screen-l1', 'screen-l2')
                        );
                    }, 1000);
                }, 1000);
            }
        };

        // --- LEVEL 2: MUTATION ---
        const level2 = {
            tryClaim: () => {
                const btn = document.querySelector('#screen-l2 .btn-warning');
                btn.classList.add('shake-anim');
                setTimeout(() => btn.classList.remove('shake-anim'), 500);

                modal.show(
                    "RoR ржЕржорж┐рж▓!",
                    "ржерж╛ржорзБржи! рж╕рж░ржХрж╛рж░рж┐ рж░рзЗржХрж░рзНржб (RoR) ржЖржкржирж╛рж░ ржжрж▓рж┐рж▓рзЗрж░ ржЪрзЗржпрж╝рзЗ ржХржо ржЬржорж┐ ржжрзЗржЦрж╛ржЪрзНржЫрзЗред ржпржжрж┐ ржЖржорж░рж╛ ржПржЦржи ржЯрж╛ржХрж╛ ржжрж┐, рждрж╛рж╣рж▓рзЗ ржкрж░ржмрж░рзНрждрзА ржХрж╛рж▓рзЗ ржЖржкржирж╛рж░ ржУ ржХрзЛржорзНржкрж╛ржирж┐рж░ ржЙржнрзЯрзЗрж░ржЗ ржЕрж╕рзБржмрж┐ржзрж╛ рж╣ржмрзЗред ржЖржкржирж╛ржХрзЗ ржЖржЧрзЗ рж░рзЗржХрж░рзНржб ржарж┐ржХ ржХрж░рждрзЗ рж╣ржмрзЗред",
                    "тЪая╕П",
                    null // stay on level
                );
            },
            mutate: () => {
                document.getElementById('l2-ror-text').innerText = "рзл ржПржХрж░";
                document.getElementById('l2-ror-text').style.color = "green";
                document.getElementById('l2-ror').classList.add('correct');

                setTimeout(() => {
                    modal.show(
                        "ржорж┐рж╢ржи рж╕ржЮрзНржЬрзАржмржирзА рж╕ржлрж▓!",
                        "ржЖржорж░рж╛ 'ржорж┐рж╢ржи рж╕ржЮрзНржЬрзАржмржирзА' ржЕржирзБрж╕рж░ржг ржХрж░рж┐ред ржЖржорж░рж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ RoR-ржП ржпрж╛ рж░рзЗржХрж░рзНржб ржХрж░рж╛ ржЖржЫрзЗ рждрж╛рж░ ржЬржирзНржпржЗ ржЯрж╛ржХрж╛ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ред ржорж┐ржЙржЯрзЗрж╢ржи рж░рзЗржХрж░рзНржб ржарж┐ржХ ржХрж░рзЗ ржпрж╛рждрзЗ ржЖржкржирж┐ рззрзжрзж% ржЯрж╛ржХрж╛ ржкрж╛ржи, рж╢рзБржзрзБ ржПржХржЯрж┐ ржЕржВрж╢ ржиржпрж╝ред",
                        "тЬЕЁЯУЭ",
                        () => game.next('screen-l2', 'screen-l3')
                    );
                }, 800);
            }
        };

        // --- LEVEL 3: PUBLIC NOTICE ---
        const level3 = {
            fastForward: () => {
                const btn = document.querySelector('#screen-l3 .btn-red');
                btn.classList.add('shake-anim');
                setTimeout(() => btn.classList.remove('shake-anim'), 500);

                modal.show(
                    "ржЭрзБржБржХрж┐ рж╕рждрж░рзНржХрждрж╛!",
                    "ржЖржкржирж┐ рждрж╛ржбрж╝рж╛рж╣рзБржбрж╝рзЛ ржХрж░рзЗржЫрзЗржи! ржПржХржЬржи рж╣рж┐ржВрж╕рзБржЯрзЗ ржкрзНрж░рждрж┐ржмрзЗрж╢рзА ржЙржкрж╕рзНржерж┐ржд рж╣ржпрж╝рзЗ ржорж╛ржорж▓рж╛ ржжрж╛ржпрж╝рзЗрж░ ржХрж░рзЗржЫрзЗ ржХрж╛рж░ржг рждрж╛рж░рж╛ ржХржерж╛ ржмрж▓рж╛рж░ рж╕рзБржпрзЛржЧ ржкрж╛ржпрж╝ржирж┐ред ржПржЦржи рж╕ржмржХрж┐ржЫрзБ ржЖржжрж╛рж▓рждрзЗ ржЖржЯржХрзЗ ржЖржЫрзЗред",
                    "тЪЦя╕ПЁЯЪл",
                    null
                );
            },
            wait: () => {
                // Animation of Drum beat
                const anim = document.getElementById('l3-anim-area');
                anim.innerHTML = "ЁЯеБ ЁЯУв ЁЯеБ ЁЯУв";

                setTimeout(() => {
                    document.getElementById('l3-shield').style.transform = "translate(-50%, -50%) scale(1)";
                    setTimeout(() => {
                        modal.show(
                            "ржЖржЗржирж┐ рж╢рж┐рж▓рзНржб рж╕ржХрзНрж░рж┐ржпрж╝",
                            "ржЖржорж░рж╛ рждрж╛рж▓рж┐ржХрж╛ржЯрж┐ рзирзз ржжрж┐ржирзЗрж░ ржЬржирзНржп ржкрзНрж░ржХрж╛рж╢ ржХрж░рж┐ ржПржмржВ ржЖржкржирж╛рж░ ржорзМржЬрж╛рзЯ ржЬржирж╕ржоржХрзНрж╖рзЗ ржШрзЛрж╖ржгрж╛ ржХрж░рж┐ред ржПржЯрж┐ ржЖржкржирж╛рж░ рж░ржХрзНрж╖рж╛ ржХржмржЪред ржпржжрж┐ ржЖржкржирж╛рж░ рж╣рж┐ржВрж╕рзБржЯрзЗ ржкрзНрж░рждрж┐ржмрзЗрж╢рзА ржПржЦржи ржЕржнрж┐ржпрзЛржЧ ржирж╛ ржХрж░рзЗ, рждржмрзЗ рждрж╛рж░рж╛ ржкрж░рзЗ ржЖрж░ ржЕржнрж┐ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред ржПржЗ ржирзЛржЯрж┐рж╢ ржкрж┐рж░рж┐рзЯржб ржЖржкржирж╛рж░ ржжрж╛ржмрж┐ржХрзЗ ржЖржЗржиржд ржоржЬржмрзБржд ржХрж░рзЗред",
                            "ЁЯЫбя╕П",
                            () => game.next('screen-l3', 'screen-l4')
                        );
                    }, 1000);
                }, 1000);
            }
        };

        // --- LEVEL 4: TWIN DEFENSE ---
        const level4 = {
            skip: () => {
                const btn = document.querySelector('#screen-l4 .btn-red');
                btn.classList.add('shake-anim');
                setTimeout(() => btn.classList.remove('shake-anim'), 500);

                modal.show(
                    "ржкрзНрж░рждрж╛рж░ржХ рж╕рждрж░рзНржХрждрж╛!",
                    "ржЖржкржирж┐ ржпрж╛ржЪрж╛ржЗржХрж░ржг ржмрж╛ржж ржжрж┐ржпрж╝рзЗржЫрзЗржи! ржПржХржЬржи ржкрзНрж░рждрж╛рж░ржХ (ржЖржкржирж╛рж░ ржоржирзЛржирзАржд ржмрзНржпржХрзНрждрж┐рж░ ржорждрзЛ ржжрзЗржЦрждрзЗ) ржиржХрж▓ ржХрж╛ржЧржЬржкрждрзНрж░ ржирж┐ржпрж╝рзЗ рж╣рж╛ржЬрж┐рж░ рж╣ржпрж╝рзЗржЫрзЗред ржЖржжрж╛рж▓ржд ржЪрж╛ржХрж░рж┐рж░ ржирж┐ржпрж╝рзЛржЧ ржмрж╛рждрж┐рж▓ ржХрж░рзЗржЫрзЗред",
                    "ЁЯСптАНтЩВя╕ПтЭМ",
                    null
                );
            },
            verify: () => {
                modal.show(
                    "ржпржоржЬ ржкрзНрж░рждрж┐рж░ржХрзНрж╖рж╛ рж╕ржлрж▓",
                    "ржкрзБрж▓рж┐рж╢ ржнрзЗрж░рж┐ржлрж┐ржХрзЗрж╢ржи ржПржмржВ рж╕рж╛ржХрзНрж╖рзА рж╕рзНржмрж╛ржХрзНрж╖рж░ (ржлрж░рзНржо VI) рж╕ржоржпрж╝ ржирзЗржпрж╝, ржХрж┐ржирзНрждрзБ рждрж╛рж░рж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ ржХрзЛржирзЛ ржкрзНрж░рждрж╛рж░ржХ ржЖржкржирж╛рж░ ржкрж░рж┐ржмрж╛рж░рзЗрж░ ржЪрж╛ржХрж░рж┐ ржЪрзБрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред ржЖржЬ ржПржХржЯрж┐ ржзрж╛ржк ржмрж╛ржж ржжрзЗржУржпрж╝рж╛ ржорж╛ржирзЗ ржХрж╛рж▓ ржЪрж╛ржХрж░рж┐ рж╣рж╛рж░рж╛ржирзЛред",
                    "ЁЯСотАНтЩВя╕ПтЬЕ",
                    () => game.next('screen-l4', 'screen-end')
                );
            }
        };

    </script>
</body>

</html>